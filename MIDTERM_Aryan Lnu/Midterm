// Simple Mini Lighting Desk 
const int potPin = 4;      // Potentiometer
const int buttonPin = 5;    // Button
const int greenLED = 9;       // Red LED pin
const int whiteLED = 10;    // Green LED pin
const int redLED = 11;     // Blue LED pin

int mode = 0;
int lastButton = HIGH;
unsigned long lastChange = 0;

void setup() {
  Serial.begin(115200);

  pinMode(buttonPin, INPUT_PULLUP);
  pinMode(greenLED, OUTPUT);
  pinMode(redLED, OUTPUT);
  pinMode(whiteLED, OUTPUT);
}

void loop() {
  int potValue = analogRead(potPin);
  int brightness = map(potValue, 0, 1023, 0, 255);
  int button = digitalRead(buttonPin);

  // --- Button press to change lighting mode ---
  if (button == LOW && lastButton == HIGH && millis() - lastChange > 200) {
    mode = (mode + 1) % 3;   // Go to next mode (0, 1, or 2)
    lastChange = millis();   // Record the time
  }
  lastButton = button;

  // --- Scene 1: green and white ---
  if (mode == 0) {
    analogWrite(greenLED, brightness);
    analogWrite(whiteLED, brightness / 2);
    analogWrite(redLED, 0);
  }

  // --- Scene 2: Cool red ---
  else if (mode == 1) {
    analogWrite(greenLED, 0);
    analogWrite(whiteLED, brightness / 3);
    analogWrite(redLED, brightness);
  }

  // --- Scene 3: Color mix ---
  else {
    analogWrite(redLED, brightness / 2);
    analogWrite(greenLED, 255 - brightness);
    analogWrite(whiteLED, brightness);
  }
  Serial.println(digitalRead(buttonPin));
  delay(100);
}
